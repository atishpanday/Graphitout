(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{65843:function(e,t,a){Promise.resolve().then(a.bind(a,14935))},14935:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return F}});var l=a(57437),s=a(11444),i=a(2265),n=a(2781),r=a(69753);let o=(0,r.oM)({name:"csv",initialState:{totalPages:0,data:[],numericalColumns:[],stringColumns:[]},reducers:{setCSVData:(e,t)=>{e.data=t.payload},setTotalPages:(e,t)=>{e.totalPages=t.payload},setNumericalColumns:(e,t)=>{e.numericalColumns=t.payload},setStringColumns:(e,t)=>{e.stringColumns=t.payload},clearCSVData:e=>{e.data=[],e.totalPages=0,e.numericalColumns=[],e.stringColumns=[]}}}),{setCSVData:c,setTotalPages:d,setNumericalColumns:u,setStringColumns:x,clearCSVData:g}=o.actions;var h=o.reducer;async function m(e){if(!e){console.log("No file selected");return}let t=new FormData;return t.append("file",e),await fetch("/api/upload",{method:"POST",body:t})}async function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,a=await fetch("/api/fetch?index=".concat(e,"&path=").concat(t)),{totalPages:l,data:s}=await a.json();return{totalPages:l,data:s}}function p(e){let{children:t}=e;return(0,l.jsx)("div",{className:"w-full h-[calc(100vh/1.5)] p-4 overflow-y-scroll overflow-x-scroll bg-white shadow-md",children:t})}function y(){let[e,t]=(0,i.useState)(null),a=(0,s.I0)(),r=(0,i.useCallback)(e=>{t(e[0])},[e]),{getRootProps:o,getInputProps:g,isDragActive:h}=(0,n.uI)({onDrop:r,accept:{"text/csv":[".csv",".txt"]},multiple:!1}),y=async()=>{if(e){let t=await m(e);if(null==t?void 0:t.ok){let e=(await t.json()).path;localStorage.setItem("file-path",e);let{totalPages:l,data:s}=await f(0,e);a(c(s));let i=Object.keys(s[0]).filter(e=>{if("number"==typeof s[0][e])return e}),n=Object.keys(s[0]).filter(e=>{if("string"==typeof s[0][e])return e});a(u(i)),a(x(n)),a(d(l))}}};return(0,i.useEffect)(()=>{y()},[e]),(0,l.jsx)(p,{children:(0,l.jsx)("div",{...o(),className:"w-full h-full flex flex-col justify-center items-center border-4 border-dashed ".concat(h?"border-blue-500":"border-gray-300"),children:(0,l.jsxs)("form",{children:[(0,l.jsx)("input",{...g()}),(0,l.jsx)("button",{type:"button",className:"px-4 py-2 m-1 font-semibold rounded-sm shadow-md hover:bg-gray-100",children:"Upload or drag and drop a file (.csv, .txt)"}),(0,l.jsx)("div",{children:null==e?void 0:e.name})]})})})}function b(e){let{index:t,totalPages:a,setIndex:s,handlePageChange:i}=e,n=e=>{e>=0&&e<a&&(i(e),s(e))};return(0,l.jsxs)("nav",{"aria-label":"Pagination",className:"flex shadow-md",children:[(0,l.jsx)("div",{onClick:()=>n(t-1),className:"px-4 py-2 bg-white cursor-pointer hover:bg-gray-200",children:"Prev"}),(0,l.jsxs)("div",{className:"px-4 py-2 bg-white border-x border-gray-200",children:[t+1," / ",a]}),(0,l.jsx)("div",{onClick:()=>n(t+1),className:"px-4 py-2 bg-white cursor-pointer hover:bg-gray-200",children:"Next"})]})}async function j(e){try{if((await fetch("/api/delete-file?path=".concat(e),{method:"DELETE"})).ok)return!0;return!1}catch(e){return console.log(e),!1}}function v(){let e=(0,s.v9)(e=>e.csv.data),t=(0,s.v9)(e=>e.csv.totalPages),[a,n]=(0,i.useState)(0),r=(0,s.I0)(),o=async e=>{var t;let a=null===(t=localStorage.getItem("file-path"))||void 0===t?void 0:t.toString(),{totalPages:l,data:s}=await f(e,a||"");r(c(s)),r(d(l))},u=async()=>{r(g());let e=localStorage.getItem("file-path");await j(e||"")};return(0,l.jsx)(p,{children:(0,l.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,l.jsx)("div",{className:"flex-10 overflow-y-scroll overflow-x-scroll",children:(0,l.jsxs)("table",{className:"bg-white border border-gray-200",children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{className:"bg-gray-100 divide-x divide-white",children:Object.keys(e[0]).map(e=>(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e},e))})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map((e,t)=>(0,l.jsx)("tr",{className:"divide-x divide-gray-200",children:Object.values(e).map((e,t)=>(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e},t))},t))})]})}),(0,l.jsxs)("div",{className:"flex-1 flex justify-between py-2 px-4 bg-gray-50 ring-1 ring-gray-200",children:[(0,l.jsx)("div",{className:"flex justify-start items-center",children:(0,l.jsx)("button",{className:"px-4 py-2 mx-1 text-white rounded-sm bg-red-500 hover:bg-red-400",onClick:()=>u(),children:"Delete"})}),(0,l.jsx)(b,{index:a,totalPages:t,setIndex:n,handlePageChange:o})]})]})})}function w(){return 0===(0,s.v9)(e=>e.csv.data).length?(0,l.jsx)(y,{}):(0,l.jsx)(v,{})}var k=a(56426),S=a(69824);function N(e){let{label:t,selected:a,setSelected:s,items:i}=e;return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("p",{className:"font-bold text-sm text-gray-900",children:"".concat(t,": ")}),(0,l.jsxs)(k.v2,{as:"div",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(k.j2,{className:"min-w-32 mx-1 flex justify-between items-center rounded-sm bg-white px-4 py-2 text-gray-900 text-sm ring-1 ring-gray-300 hover:bg-gray-50",children:[""===a?"Options":a,(0,l.jsx)(S.yQg,{})]})}),(0,l.jsx)(k.sd,{transition:!0,className:"absolute z-10 my-2 mx-1 max-h-[240px] min-w-32 overflow-y-scroll rounded-sm bg-white shadow-lg ring-1 ring-gray-300 transition focus:outline-none data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75 data-[enter]:ease-out data-[leave]:ease-in",children:(0,l.jsx)("div",{className:"py-1",children:i.map((e,t)=>(0,l.jsx)(k.sN,{children:(0,l.jsx)("div",{className:"px-4 py-2 text-sm text-gray-700 data-[focus]:bg-gray-100 data-[focus]:text-gray-900",onClick:()=>s(e),children:e},t)},t))})})]})]})}function _(e,t,a){let l={},s={},i=1,n=1,r=[{id:"0",data:[]}];return e.map((e,r)=>{e[t].length>i&&(i=e[t].length),e[a].length>n&&(n=e[a].length),e[t]in l?(l[e[t]]+=e[a],s[e[t]]+=1):(l[e[t]]=e[a],s[e[t]]=1)}),Object.keys(l).map((e,t)=>{r[0].data.push({x:e,y:l[e]/s[e]})}),{avgDataArr:r,leftMargin:Math.max(50,4.25*n)+20,bottomMargin:Math.max(50,4.25*i)+20}}var P=a(56419);function C(e){let{totalPages:t,x:a,y:i,graphOptions:n}=e,{avgDataArr:r,leftMargin:o,bottomMargin:c}=_((0,s.v9)(e=>e.csv.data),a,i);return(0,l.jsx)(P.jM,{data:r[0].data,keys:["y"],indexBy:"x",margin:{top:50,right:50,bottom:c,left:o},padding:.3,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:n.colorScheme},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:c>100?-45:0,legend:a,legendPosition:"middle",legendOffset:c-10,truncateTickAt:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:i,legendPosition:"middle",legendOffset:-o+10,truncateTickAt:0},labelSkipWidth:12,labelSkipHeight:12,enableLabel:!1})}var O=a(34797);function T(e){let{totalPages:t,x:a,y:i,graphOptions:n}=e,{avgDataArr:r,leftMargin:o,bottomMargin:c}=_((0,s.v9)(e=>e.csv.data),a,i);return(0,l.jsx)(O.fH,{data:r,margin:{top:50,right:50,bottom:c,left:o},xScale:{type:"point"},colors:{scheme:n.colorScheme},yScale:{type:"linear",min:"auto",max:"auto",reverse:!1},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:c>100?-45:0,legend:a,legendOffset:c-10,legendPosition:"middle",truncateTickAt:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:i,legendOffset:-o+10,legendPosition:"middle",truncateTickAt:0},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,pointLabel:"data.y",enableArea:!0,areaBaselineValue:Math.min(...r[0].data.map(e=>e.y)),enableTouchCrosshair:!0,useMesh:!1})}var R=a(98088);function z(e){let{totalPages:t,x:a,y:i,graphOptions:n}=e,{avgDataArr:r,leftMargin:o,bottomMargin:c}=_((0,s.v9)(e=>e.csv.data),a,i);return(0,l.jsx)(R.IG,{data:r,margin:{top:50,right:50,bottom:c,left:o},xScale:{type:"linear",min:0,max:"auto"},xFormat:">-.2f",yScale:{type:"linear",min:0,max:"auto"},yFormat:">-.2f",colors:{scheme:n.colorScheme},blendMode:"multiply",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:a,legendPosition:"middle",legendOffset:60,truncateTickAt:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:i,legendPosition:"middle",legendOffset:-60,truncateTickAt:0}})}let B=["nivo","category10","accent","dark2","paired","pastel1","pastel2","set1","set2","set3","brown_blueGreen","purpleRed_green","pink_yellowGreen","purple_orange","red_blue","red_grey","red_yellow_blue","red_yellow_green","spectral","blues","greens","greys","oranges","purples","reds","blue_green","blue_purple","green_blue","orange_red","purple_blue_green","purple_blue","purple_red","red_purple","yellow_green_blue","yellow_green","yellow_orange_brown","yellow_orange_red"],L=["Bar","Line","Scatter"];function I(){let[e,t]=(0,i.useState)(""),[a,n]=(0,i.useState)(""),[r,o]=(0,i.useState)("Bar"),[c,d]=(0,i.useState)({colorScheme:"set3"}),{data:u,totalPages:x,numericalColumns:g,stringColumns:h}=(0,s.v9)(e=>e.csv);return(0,l.jsx)(p,{children:u.length>0&&(0,l.jsxs)("div",{className:"p-1 h-full flex flex-col justify-between items-center",children:[(0,l.jsxs)("div",{className:"w-full flex justify-between items-center text-gray-900",children:[(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(N,{label:"Color scheme",selected:c.colorScheme,setSelected:e=>d(t=>({...t,colorScheme:e})),items:B})}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(N,{label:"x",selected:e,setSelected:t,items:"Scatter"===r?g:h}),(0,l.jsx)(N,{label:"y",selected:a,setSelected:n,items:g}),(0,l.jsx)(N,{label:"Plot type",selected:r,setSelected:o,items:L})]})]}),e.length>0&&a.length>0&&(0,l.jsxs)(l.Fragment,{children:["Bar"===r&&(0,l.jsx)(C,{totalPages:x,x:e,y:a,graphOptions:c}),"Line"===r&&(0,l.jsx)(T,{totalPages:x,x:e,y:a,graphOptions:c}),"Scatter"===r&&(0,l.jsx)(z,{totalPages:x,x:e,y:a,graphOptions:c})]})]})})}function M(){return(0,l.jsxs)("div",{className:"w-full h-400 p-6 flex justify-between items-center bg-white shadow-md",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-8xl font-bold text-blue-500",children:"Graphitout"}),(0,l.jsx)("p",{className:"text-4xl text-gray-500",children:"Create beautiful graphs in just a few clicks!"})]}),(0,l.jsx)("iframe",{src:"https://lottie.host/embed/b6dea8b9-6d47-4719-b250-6b698da8dbbb/IRbsgPwjLk.json"})]})}var A=a(28196);function E(e){let{handleAddGraph:t}=e;return(0,l.jsx)(p,{children:(0,l.jsx)("div",{className:" h-full flex justify-center items-center cursor-pointer",onClick:t,children:(0,l.jsx)(A.RWX,{size:150,fill:"lightgray"})})})}function D(){let e=(0,s.v9)(e=>e.csv.data),[t,a]=(0,i.useState)([0]);return(0,i.useEffect)(()=>{a([0])},[e]),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)(M,{}),(0,l.jsxs)("div",{className:"w-full grid grid-cols-2 gap-x-2 gap-y-2 my-4",children:[(0,l.jsx)(w,{}),t.map((e,t)=>(0,l.jsx)(I,{},t)),(0,l.jsx)(E,{handleAddGraph:()=>{a(e=>[...e,e[e.length-1]+1])}})]})]})}let G=(0,r.xC)({reducer:{csv:h}});function F(){return(0,l.jsx)(s.zt,{store:G,children:(0,l.jsx)(D,{})})}}},function(e){e.O(0,[452,614,501,747,971,23,744],function(){return e(e.s=65843)}),_N_E=e.O()}]);